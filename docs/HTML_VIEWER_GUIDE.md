# HTML Training Plan Viewer - User Guide

## Overview

The HTML Training Plan Viewer provides an interactive, professional interface for viewing cycling training plans generated by the cycling-ai tool. It features a calendar-style layout, athlete selection, and detailed workout breakdowns with power profile visualizations.

## Key Features

### ðŸŽ¨ Professional Design
- Custom cycling-inspired color palette (deep navy, vibrant orange, teal accents)
- Modern gradient effects and glass-morphism styling
- Responsive design that works on desktop, tablet, and mobile
- Distinctive, non-generic layout that stands out from typical LLM-generated UIs

### ðŸ“… Interactive Calendar
- 12-week training plan displayed in calendar grid format
- Week-by-week progression with phase indicators (Foundation, Build, Peak, Recovery)
- Visual workout intensity indicators
- Click any workout to see detailed breakdown

### ðŸ‘¤ Multi-Athlete Support
- Dropdown selector in header to switch between athletes
- Athlete profile card showing key metrics (FTP, weight, age)
- FTP progression display (current â†’ target)
- Avatar/icon for visual identification

### ðŸ’ª Detailed Workout View
- Modal popup with comprehensive workout details
- Segment-by-segment breakdown (warmup, intervals, cooldown)
- Duration, power zones, and intensity for each segment
- SVG power profile charts (when available)
- TSS and total duration calculations

## Getting Started

### Automatic Generation

When you run the cycling-ai generate command, the viewer is automatically created:

```bash
cycling-ai generate \
  --profile path/to/athlete_profile.json \
  --fit-dir path/to/fit_files \
  --output-dir /tmp/reports
```

**Output files:**
- `/tmp/reports/report_data.json` - Training plan data
- `/tmp/reports/training_plan_viewer.html` - Interactive viewer (NEW!)
- `/tmp/reports/performance_report.md` - Markdown report
- `/tmp/reports/training_plan.md` - Markdown training plan

### Opening the Viewer

Simply open the HTML file in any modern web browser:

```bash
# macOS
open /tmp/reports/training_plan_viewer.html

# Linux
xdg-open /tmp/reports/training_plan_viewer.html

# Windows
start /tmp/reports/training_plan_viewer.html
```

Or double-click the `training_plan_viewer.html` file in your file explorer.

## Using the Viewer

### Navigation

1. **Select Athlete**: Use the dropdown in the header to switch between athletes (if multiple athletes in report)

2. **View Calendar**: Scroll through the 12-week calendar to see all workouts

3. **Click Workouts**: Click any workout day to open detailed modal with:
   - Workout name and description
   - Total duration and TSS
   - Segment breakdown with power zones
   - SVG power profile chart

4. **Close Modal**: Click the Ã— button or press Escape key

### Understanding the Calendar

**Phase Colors:**
- ðŸŸ¦ **Foundation** (Weeks 1-4): Base building phase
- ðŸŸ© **Build** (Weeks 5-8): Intensity increases
- ðŸŸ¨ **Peak** (Weeks 9-11): Maximum intensity
- ðŸŸ¥ **Recovery** (Week 12): Taper and recovery

**Workout Indicators:**
- Colored left border shows workout intensity
- Duration displayed in minutes
- Rest days clearly marked

### Athlete Profile Card

The profile card shows:
- **Athlete name and ID**
- **Current FTP** â†’ **Target FTP** (power in watts)
- **Age** and **Weight** (kg)
- **Training plan duration** (weeks)

### Workout Details Modal

Each workout modal includes:

**Header Section:**
- Workout name (e.g., "Threshold", "Sweet Spot", "VO2 Max")
- Day of week
- Total duration
- TSS (Training Stress Score)

**Segments Section:**
- Detailed breakdown of each workout segment
- Power zones (Z1-Z7)
- Duration for each segment
- Intensity descriptions

**Power Profile (if available):**
- SVG visualization of workout structure
- Visual representation of intensity over time

## Technical Details

### File Requirements

The viewer requires two files in the same directory:
1. `training_plan_viewer.html` - The viewer interface
2. `report_data.json` - The training plan data

**Important:** Both files must be in the same folder for the viewer to load data correctly.

### Browser Compatibility

The viewer works in all modern browsers:
- âœ… Chrome/Chromium (recommended)
- âœ… Firefox
- âœ… Safari
- âœ… Edge
- âœ… Opera

**Minimum versions:**
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### Data Format

The viewer expects `report_data.json` in the following structure:

```json
{
  "version": "1.0",
  "generated_timestamp": "2025-10-29T10:30:00Z",
  "athletes": [
    {
      "id": "athlete_id",
      "name": "Athlete Name",
      "profile": {
        "age": 51,
        "ftp": 260,
        "weight_kg": 84
      },
      "training_plan": {
        "current_ftp": 260,
        "target_ftp": 275,
        "total_weeks": 12,
        "power_zones": {...},
        "weekly_workouts": [...]
      }
    }
  ]
}
```

See `docs/REPORT_DATA_FORMAT.md` for complete specification.

## Customization

### Modifying Colors

The viewer uses CSS custom properties (variables) for colors. To customize, edit the `:root` section in the HTML file:

```css
:root {
  --primary-dark: #1a2332;    /* Header background */
  --accent-orange: #ff6b35;   /* Primary accent */
  --accent-teal: #004e89;     /* Secondary accent */
  --accent-yellow: #ffc857;   /* Tertiary accent */
  --success-green: #06d6a0;   /* Success indicators */
}
```

### Adding Custom Branding

To add your own logo or branding:

1. Locate the header section in the HTML
2. Replace the cycling icon SVG with your logo
3. Update the title text as needed

### Styling Modifications

The viewer is fully self-contained with CSS inline. All styling can be modified by editing the `<style>` section in the HTML file.

## Troubleshooting

### Viewer Shows "No athletes found"

**Cause:** `report_data.json` not found or invalid

**Solutions:**
1. Verify `report_data.json` is in the same directory as the HTML file
2. Check the JSON file is valid (use JSON validator)
3. Ensure file has `.json` extension (not `.txt`)

### Workout Details Not Showing

**Cause:** Missing workout data in JSON

**Solutions:**
1. Regenerate report with latest cycling-ai version
2. Verify training plan was successfully generated
3. Check session logs for errors during plan generation

### Browser Shows Blank Page

**Cause:** JavaScript error or CORS restrictions

**Solutions:**
1. Open browser developer console (F12) to see errors
2. If opening from `file://`, some browsers restrict local file access
3. Try different browser (Chrome recommended)
4. Check that JSON file is not corrupted

### Athlete Selector Empty

**Cause:** No athletes in report data

**Solutions:**
1. Verify `report_data.json` contains at least one athlete
2. Check `athletes` array in JSON is not empty
3. Regenerate report with correct athlete profile

## Performance

### Load Times

- **Initial load:** < 0.5 seconds (typical)
- **Athlete switching:** < 0.1 seconds
- **Modal opening:** Instant

### File Sizes

- **Viewer HTML:** ~36 KB
- **Report data:** ~120-130 KB (12-week plan with 1 athlete)
- **Total:** ~160 KB for complete package

### Optimization Tips

1. **Large plans (multiple athletes):** Data loads quickly even with 5-10 athletes
2. **SVG charts:** Embedded inline for instant display
3. **No external dependencies:** Everything self-contained, no internet required

## Sharing Reports

### Option 1: Send Both Files

Send the complete directory containing:
- `training_plan_viewer.html`
- `report_data.json`

Recipient can open HTML file in any browser.

### Option 2: Zip Archive

```bash
cd /tmp/reports
zip training_plan.zip training_plan_viewer.html report_data.json
```

Send `training_plan.zip` to recipient.

### Option 3: Web Hosting

Upload both files to any web server:
- No server-side processing required
- Works as static files
- Can be hosted on GitHub Pages, Netlify, etc.

## Privacy & Security

### Data Storage

- All data is local - nothing sent to external servers
- Viewer runs entirely in browser (client-side JavaScript)
- No tracking, analytics, or telemetry

### Sensitive Information

The report contains:
- Athlete personal data (name, age, weight)
- Performance metrics (FTP, training zones)
- Training plan details

**Recommendations:**
- Store reports in secure location
- Use appropriate file permissions
- Don't share publicly without athlete consent
- Consider removing personal data before sharing

## Integration with Workflow

### Phase 5: Automatic Generation

The viewer is generated as part of Phase 5 (Report Data Preparation):

```
Phase 1: Data Preparation (FIT files â†’ Parquet)
Phase 2: Performance Analysis
Phase 3: Training Planning
Phase 4: Report Generation (Markdown)
Phase 5: Report Data Preparation
  â”œâ”€â”€ Extract training plan from session
  â”œâ”€â”€ Create report_data.json
  â””â”€â”€ Copy training_plan_viewer.html  â† Automatic!
```

### Testing Phase 5

Test the integrated workflow:

```bash
python3 scripts/test_integrated_report_prep.py
```

This simulates Phase 5 execution and creates both files in `/tmp/cycling_DEBUG_WITH_LOGGING_1/`.

## Advanced Usage

### Multiple Reports

Generate reports for different athletes in separate directories:

```bash
# Athlete 1
cycling-ai generate --profile athlete1.json --output-dir /tmp/athlete1_report

# Athlete 2
cycling-ai generate --profile athlete2.json --output-dir /tmp/athlete2_report
```

Each directory gets its own viewer and data.

### Batch Processing

Create multiple athletes in single report:

```bash
# Generate plans for multiple athletes
# (Future enhancement - currently one athlete per run)
cycling-ai generate \
  --athletes athlete1.json athlete2.json \
  --output-dir /tmp/team_report
```

Single viewer with athlete selector dropdown.

### Export Options

**Future enhancements:**
- Export to Garmin `.fit` files
- Export to TrainingPeaks
- Export to PDF
- Export to CSV

## Support & Feedback

### Documentation

- **Complete workflow:** `docs/INTEGRATED_WORKFLOW.md`
- **Data format spec:** `docs/REPORT_DATA_FORMAT.md`
- **Integration summary:** `docs/INTEGRATION_SUMMARY.md`

### Issues

Report issues at: [GitHub Issues](https://github.com/your-repo/issues)

### Contributing

Contributions welcome! Areas for enhancement:
- Additional chart types (TSS progression, IF curves)
- Calendar export (Google Calendar, Apple Calendar)
- Workout export to training platforms
- Print-friendly CSS for PDF generation
- Dark mode toggle

## Version History

### Version 1.0 (October 2025)
- âœ… Initial release
- âœ… Interactive calendar view
- âœ… Multi-athlete support
- âœ… Workout detail modals
- âœ… SVG power profiles
- âœ… Responsive design
- âœ… Automatic Phase 5 integration

### Planned Enhancements

**v1.1:**
- Week-by-week TSS summary chart
- Print stylesheet for clean PDF output
- Dark mode toggle
- Workout notes/comments field

**v1.2:**
- Calendar export (.ics format)
- Workout export to Garmin
- Mobile app wrapper (PWA)
- Offline support with service worker

## Summary

The HTML Training Plan Viewer provides a professional, interactive way to view cycling training plans generated by cycling-ai. It's automatically created during the workflow, requires no setup, and works completely offline in any modern browser.

**Key benefits:**
- ðŸŽ¨ Professional, unique design
- ðŸ“… Interactive 12-week calendar
- ðŸ‘¤ Multi-athlete support
- ðŸ’ª Detailed workout breakdowns
- âš¡ Fast, responsive, self-contained
- ðŸ”’ Private, no external dependencies

To get started, simply run `cycling-ai generate` and open the resulting `training_plan_viewer.html` file!
