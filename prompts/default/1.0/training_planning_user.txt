Design a personalized {training_plan_weeks}-week training plan for this athlete.

**Athlete Profile:** {athlete_profile_path}


**Power Zones:**
{power_zones}

**Context Available to You:**
- Performance analysis data showing recent trends, fitness trajectory, and time-in-zones
- Athlete profile with FTP, goals, available training days, and constraints
- Current training status and age considerations
- Power zones calculated above for workout design

**Your Responsibilities:**

1. **Analyze the Athlete's Situation**
   - What does the performance data tell you about their current state?
   - Are they improving, stable, or declining?
   - What are their strengths and limiters based on time-in-zones?
   - What do their goals require?

2. **Design Appropriate Periodization**
   - Don't use a generic template - design for THIS athlete
   - Consider their recent trends when planning phases
   - Balance their goals with their available time and recovery capacity
   - Set a realistic target FTP based on current trajectory and plan duration

3. **Create Each Workout (Do This First)**
   - Design ONE workout for EACH training day across ALL {training_plan_weeks} weeks
   - Use the power zones provided above to design appropriate power targets
   - Use create_workout to build each workout with specific structure:
     * Workout name and description
     * Segments array with warm-up, main intervals, recovery, cool-down
     * Specific power targets (in watts) for each segment
     * Duration for each segment
   - Remember: High-intensity workouts need warm-up and cool-down
   - Total workouts to create: Approximately {training_plan_weeks} weeks × athlete's available training days
   - Create ALL workouts BEFORE proceeding to step 6

4. **Organize Into Weekly Structure**
   - Respect the athlete's available training days (don't schedule more than they have)
   - For each week, specify:
     * Week number (1 to {training_plan_weeks})
     * Phase (Foundation, Build, Recovery, Peak, or whatever is appropriate)
     * Phase rationale (why this phase for this athlete at this point?)
     * Workouts (mapping day names to workout objects from create_workout)
     * Weekly focus (what's the key training stimulus this week?)
     * Monitoring notes (what should the athlete watch for this week?)

5. **Provide Coaching Guidance**
   - Write comprehensive coaching_notes explaining:
     * Why you chose this specific structure
     * How this addresses the athlete's performance trends
     * Your rationale for the target FTP
     * How the plan aligns with their goals
     * Key success factors
   - Write monitoring_guidance explaining:
     * What metrics the athlete should track
     * Warning signs that might require adjustment
     * When to prioritize recovery
     * Specific considerations for this athlete's situation

6. **Finalize the Plan - FINAL REQUIRED STEP**
   - AFTER creating all workouts for all {training_plan_weeks} weeks, YOU MUST call finalize_training_plan
   - Do NOT create more workouts after you have covered all {training_plan_weeks} weeks
   - YOU MUST use the finalize_training_plan tool to save your plan
   - Call finalize_training_plan ONCE with the complete plan:
     * athlete_profile_json: {athlete_profile_path}
     * total_weeks: {training_plan_weeks}
     * target_ftp: your determined target (be realistic!)
     * weekly_plan: array of all {training_plan_weeks} weeks with workouts
     * coaching_notes: your coaching analysis and rationale
     * monitoring_guidance: what athlete should monitor
   - This tool call is REQUIRED - do not skip it!

**Completion Checklist (verify before calling finalize_training_plan):**
- ✓ Created workouts for all {training_plan_weeks} weeks
- ✓ Organized workouts into weekly structure with phases and rationale
- ✓ Written coaching_notes explaining your plan design
- ✓ Written monitoring_guidance for the athlete
- ✓ Ready to call finalize_training_plan tool NOW

**Example Workout Creation:**

```
create_workout(
  workout_name="Week 1 Threshold Development",
  description="Build FTP with sustained sub-threshold efforts",
  ftp=260,
  segments=[
    {{"type": "warmup", "duration_min": 15, "power_low": 150, "power_high": 195, "description": "Progressive warm-up Z1-Z2"}},
    {{"type": "interval", "duration_min": 15, "power_low": 234, "power_high": 247, "description": "Threshold effort 90-95% FTP"}},
    {{"type": "recovery", "duration_min": 5, "power_low": 143, "power_high": 143, "description": "Easy spinning recovery"}},
    {{"type": "interval", "duration_min": 15, "power_low": 234, "power_high": 247, "description": "Threshold effort 90-95% FTP"}},
    {{"type": "cooldown", "duration_min": 10, "power_low": 150, "power_high": 120, "description": "Easy recovery spin"}}
  ]
)
```

**Critical Reminders:**
- This is a PERSONALIZED coaching program - analyze the performance data and adapt to THIS athlete
- YOU MUST call finalize_training_plan tool AFTER creating all workouts - do NOT return JSON directly
- Do NOT create endless workouts - create exactly {training_plan_weeks} weeks of training, then STOP and call finalize_training_plan
- Explain your reasoning throughout - you're coaching, not just outputting a template
- Base your decisions on the actual performance data available to you

**Workflow Summary:**
1. Analyze athlete's data and determine periodization
2. Create workouts using create_workout for all {training_plan_weeks} weeks
3. Organize workouts into weekly structure
4. Write coaching notes and monitoring guidance
5. Call finalize_training_plan tool (REQUIRED FINAL STEP)
